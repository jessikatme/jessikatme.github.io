<!DOCTYPE html>
    <!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
    <!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->


    <!-- head
    ============================================================================ -->
    <head>
        <!-- Basic Info
        ======================================================================== -->
        <!-- generics -->
        <link rel="icon" type="image/x-icon" href="./img/favicon-32x32.png" sizes="32x32">
        <!-- iOS -->
        <link rel="apple-touch-icon" sizes="180x180" href="./img/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon-16x16.png">
        <!-- Android -->
        <link rel="shortcut icon" sizes="512x512" href="./img/fandroid-chrome-512x512.png">
        <link rel="shortcut icon" sizes="196x196" href="./img/fandroid-chrome-196x196.png">
        <link rel="shortcut icon" sizes="192x192" href="./img/fandroid-chrome-192x192.png">
        <!-- Windows-->
        <link rel="manifest" href="./img/site.webmanifest">
        <link rel="mask-icon" href="./img/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">

        <meta name="theme-color" content="#ffffff">
        <meta charset="utf-8" />
    
        <title>Jessikat Mendieta | Generador de enlaces de Amazon</title>
        <meta name="author" content="Jessikat Mendieta" />
        <meta name="robots" content="index follow" />
        <meta name="googlebot" content="index follow" />
        <meta name="description" content="Jessikat Mendieta | Mujer transgenero y una catgirl a la que le encantan los videojuegos, el anime, tips para app, obs y más." />
        <meta name="keywords" content="Jessikat, Irisviel, Mendieta, Sainz, Catgirljessie, catgeek, catgeeks, blogger, developer, personal, linktree, youtube, twitch, trovo, streamer, activista, quality assurance, transgenero, gaymer,gamer">

        <meta name="twitter:card" content="summary"/>
        <meta name="twitter:title" content="Jessikat Mendieta"/>
        <meta name="twitter:site" content="@jessikatme">
        <meta name="twitter:creator" content="@jessikatme">
        <meta name="twitter:description" content="Jessikat Mendieta | Mujer transgenero y una catgirl a la que le encantan los videojuegos, el anime, tips para app, obs y más.."/>

        <meta property="og:url" content="https://jessikat.me">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Jessikat Mendieta" />
        <meta property="og:description" content="Jessikat Mendieta | Mujer transgenero y una catgirl a la que le encantan los videojuegos, el anime, tips para app, obs y más." />
        <meta property="og:description" content="EritraJinx | Cosplayer, Caster, Streamer, TvHost, Host Proguides ES, Ex Host Actualizando LoL, Twitch Partner, League Partner">
        <meta property="og:type" content="website" />

        <!-- Mobile Configurations
        ======================================================================== -->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
   
        <!-- Google Fonts
        ======================================================================== -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800;900&family=Poppins:wght@100;200;300;400;500&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    
        <!--  CSS Files Font Awesome
        ======================================================================== -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" integrity="sha512-W/zrbCncQnky/EzL+/AYwTtosvrM+YG/V6piQLSe2HuKS6cmbw89kjYkp3tWFn1dkWV7L1ruvJyKbLz73Vlgfg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" integrity="sha512-siarrzI1u3pCqFG2LEzi87McrBmq6Tp7juVsdmGY1Dr8Saw+ZBAzDzrGwX3vgxX1NkioYNCFOVC0GpDPss10zQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        
        <!--  CSS Code
        ======================================================================== -->
        <link rel="stylesheet" type="text/css" href="style.css" />
        
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <script> 
            $(function(){
              $("#header").load("header.html"); 
              $("#footer").load("footer.html"); 
            });
        </script> 


    </head>
    <!-- Body
    ============================================================================ -->
    <body>
        <main class="wrapped">
            <header>
                <!--#include virtual="./header.html" -->

            </header>

            <article>
                <section class="content">
                    <h1>Enlaces de Amazon</h1>

                    <h2>¿Realizas compras por Amazon?</h2>
                    <p >Puedes apoyarme utilizando la siguiente herramienta para generar un enlace de compra con tus artículos de Amazon MX y Amazon USA antes de comprarlos o agregarlos al carrito.</p>

                    <div id="group" class="form-group">
                        <label for="url" class="control-label">Introduce la URL del producto de Amazon</label>
                        <input id="url" name="url" type="url" class="form-control" placeholder="Tu enlace de Amazon">
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="longUrl">Resultado (Copia y usa el nuevo enlace)</label>
                        <input id="longUrl" onclick="this.select();" class="form-control" type="url" placeholder="Nuevo enlace"/>
                    </div>

                    <!-- div class="form-group">
                        <label class="control-label" for="shortUrl">Resultado URL minimizada</label>
                        <input id="shortUrl" onclick="this.select();" class="form-control" type="url"/>
                    </div -->

                    <div class="form-group">
                        <a href="#" id="directLink" title="Enlace directo"></a>
                    </div>

                    <script>
                    window.onload = function() {

                        var url = document.getElementById('url');
                        url.addEventListener('input', function () {
                            var search = url.value;
                            var pattern = 'B[0-9|A-Z]{9}';
                            var asin = search.match(pattern);
                            var directLink = document.getElementById('directLink');

                            // If the amazon ASIN is available
                            if(asin){
                                var tag = "jessikatme04-20";
                                var longUrl = "http://www.amazon.com.mx/dp/" + asin + "/?tag=" + tag;
                                var endpoint = "bitly.php";
                                var params = "asin=" + asin + "&tag=" + tag;

                                // Instant parsed url result
                                document.getElementById('longUrl').value = longUrl;
                                document.getElementById("group").classList.remove('has-error');

                                var request = new XMLHttpRequest();
                                request.open('POST', endpoint, true); // asynchronous POST request
                                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                                request.onreadystatechange = function(){

                                    if(request.readyState == 4 && request.status == 200){
                                        if(JSON.parse(request.response).error){
                                            console.log (JSON.parse(request.response).error);
                                        } else {
                                            var data = JSON.parse(request.response).data;
                                            var shortUrl = data.url;

                                            document.getElementById('shortUrl').value = shortUrl;

                                            directLink.href = shortUrl;
                                            directLink.innerHTML = shortUrl;
                                        }
                                    }
                                };

                                request.send(params);

                            } else {
                                document.getElementById("group").classList.add('has-error');
                                document.getElementById('longUrl').value = "";
                                document.getElementById('shortUrl').value = "";
                                directLink.href = "";
                                directLink.innerHTML = "";
                            }
                        });
                    }
                    </script>
                </section>
            </article>
        </main>
    </body>
</html>
